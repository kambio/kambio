
KILL_passet_test_sh

CURR=COP
ISSUER=passet_issuer 
SELECTOR=passet_choose 
TRANSFER=passet_transfer 
PROTO=-mudp
# PROTO=""

cd /home/jose/tmp
rm -rf passet_test
mkdir passet_test

cd ./passet_test

GAM_FF=../gamal_sys_0.dat

PORT_SU=5432
PORT_L1=5433
PORT_L2=5434
PORT_L3=5435

DOM_SU=localhost:$PORT_SU:7000
DOM_L1=localhost:$PORT_L1:7000
DOM_L2=localhost:$PORT_L2:7000
DOM_L3=localhost:$PORT_L3:7000

PORT_U1=9101
PORT_U2=9102
PORT_U3=9103

$ISSUER -k "supr" $PROTO -c -snm "nm_supr" -sid "id_sup" -scc "CO" -glid -gamal $GAM_FF
$ISSUER -k "lca1" $PROTO -c -snm "nm_lca1" -sid "id_lc1" -scc "CO" -glid -gamal $GAM_FF
$ISSUER -k "lca2" $PROTO -c -snm "nm_lca2" -sid "id_lc2" -scc "CO" -glid -gamal $GAM_FF
$ISSUER -k "lca3" $PROTO -c -snm "nm_lca3" -sid "id_lc3" -scc "CO" -glid -gamal $GAM_FF
$ISSUER -k "usu1" $PROTO -c -snm "nm_usu1" -sid "id_001" -scc "CO" -glid -gamal $GAM_FF
$ISSUER -k "usu2" $PROTO -c -snm "nm_usu2" -sid "id_002" -scc "CO" -glid -gamal $GAM_FF
$ISSUER -k "usu3" $PROTO -c -snm "nm_usu3" -sid "id_003" -scc "CO" -glid -gamal $GAM_FF

GLI_SU=`$ISSUER -k "supr" $PROTO -prt_glid`
GLI_L1=`$ISSUER -k "lca1" $PROTO -prt_glid`
GLI_L2=`$ISSUER -k "lca2" $PROTO -prt_glid`
GLI_L3=`$ISSUER -k "lca3" $PROTO -prt_glid`
GLI_U1=`$ISSUER -k "usu1" $PROTO -prt_glid`
GLI_U2=`$ISSUER -k "usu2" $PROTO -prt_glid`
GLI_U3=`$ISSUER -k "usu3" $PROTO -prt_glid`

echo "GSU="$GLI_SU
echo "GL1="$GLI_L1
echo "GL2="$GLI_L2
echo "GL3="$GLI_L3
echo "GU1="$GLI_U1
echo "GU2="$GLI_U2
echo "GU3="$GLI_U3

$TRANSFER -k "supr" $PROTO -port "$PORT_SU" -is_supra &
$TRANSFER -k "lca1" $PROTO -port "$PORT_L1" -is_locator &
$TRANSFER -k "lca2" $PROTO -port "$PORT_L2" -is_locator &
$TRANSFER -k "lca3" $PROTO -port "$PORT_L3" -is_locator &

echo "STARTED LOCATORS"

$TRANSFER -k "supr" $PROTO -port "$PORT_SU" -set_next_locator $DOM_L1
$TRANSFER -k "usu1" $PROTO -port "$PORT_U1" -add_supra "$DOM_SU"
$TRANSFER -k "usu1" $PROTO -port "$PORT_U1" -prt_locators

$TRANSFER -k "supr" $PROTO -port "$PORT_SU" -set_next_locator $DOM_L2
$TRANSFER -k "usu2" $PROTO -port "$PORT_U2" -add_supra "$DOM_SU"
$TRANSFER -k "usu2" $PROTO -port "$PORT_U2" -prt_locators

$TRANSFER -k "supr" $PROTO -port "$PORT_SU" -set_next_locator $DOM_L3
$TRANSFER -k "usu3" $PROTO -port "$PORT_U3" -add_supra "$DOM_SU"
$TRANSFER -k "usu3" $PROTO -port "$PORT_U3" -prt_locators

echo "ADDED_SUPRAS"

$TRANSFER -k "usu1" $PROTO -port "$PORT_U1" &
$TRANSFER -k "usu2" $PROTO -port "$PORT_U2" &
$TRANSFER -k "usu3" $PROTO -port "$PORT_U3" &

